<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Able: Geodetic.cs Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(initResizable);
/* @license-end */</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="Askowl-100x100.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Able
   </div>
   <div id="projectbrief">Askowl Base Library Enabler</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('_geodetic_8cs_source.html','');});
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Geodetic.cs</div>  </div>
</div><!--header-->
<div class="contents">
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">// Copyright 2018 (C) paul@marrington.net http://www.askowl.net/unity-packages</span></div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="keyword">using</span> <a class="code" href="namespace_system.html">System</a>;</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;</div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="keyword">namespace </span><a class="code" href="namespace_askowl.html">Askowl</a> {<span class="comment"></span></div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">  /// &lt;a href=&quot;http://bit.ly/2NZT6Nd&quot;&gt;Geodesy: The branch of mathematics dealing with the shape and area of the earth or large portions of it.&lt;/a&gt;</span></div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">  /// &lt;br/&gt;</span></div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">  /// Origin: late 16th century: from modern Latin geodaesia, from Greek geōdaisia, from gē ‘earth’ + daiein ‘divide’.</span></div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">  /// &lt;br/&gt;</span></div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">  /// https://en.wikipedia.org/wiki/Geodesy  https://www.movable-type.co.uk/scripts/latlong.html</span></div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment"></span>  <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">class </span>Geodetic {<span class="comment"></span></div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment">    /// &lt;a href=&quot;http://bit.ly/2NZT6Nd&quot;&gt;Yes, all the calculations herein are based on a guess of the earth&#39;s radius between the two points in question.&lt;/a&gt;</span></div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment"></span>    <span class="keyword">public</span> <span class="keyword">const</span> <span class="keywordtype">double</span> EarthMeanRadiusKm = 6371.01;</div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment">    /// &lt;a href=&quot;http://bit.ly/2Oq9qpQ&quot;&gt;Yet another way to specify coordinates. Consider it as another view on truth. It is a struct, so it will be passed around by value.&lt;/a&gt;</span></div><div class="line"><a name="l00016"></a><span class="lineno"><a class="line" href="struct_askowl_1_1_geodetic_1_1_coordinates.html">   16</a></span>&#160;<span class="comment"></span>    <span class="keyword">public</span> <span class="keyword">struct </span><a class="code" href="struct_askowl_1_1_geodetic_1_1_coordinates.html">Coordinates</a> {<span class="comment"></span></div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment">      /// &lt;a href=&quot;http://bit.ly/2Oq9qpQ&quot;&gt;Decimal latitude and longitude held in a 64 bit floating point number&lt;/a&gt;</span></div><div class="line"><a name="l00018"></a><span class="lineno"><a class="line" href="struct_askowl_1_1_geodetic_1_1_coordinates.html#a4a9e4c5478c3bff635f81690ae4d75e8">   18</a></span>&#160;<span class="comment"></span>      <span class="keyword">public</span> readonly <span class="keywordtype">double</span> <a class="code" href="struct_askowl_1_1_geodetic_1_1_coordinates.html#a4a9e4c5478c3bff635f81690ae4d75e8">Latitude</a>;</div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="comment">      /// &lt;a href=&quot;http://bit.ly/2Oq9qpQ&quot;&gt;Decimal latitude and longitude held in a 64 bit floating point number/&lt;/a&gt;</span></div><div class="line"><a name="l00021"></a><span class="lineno"><a class="line" href="struct_askowl_1_1_geodetic_1_1_coordinates.html#a8d11c14e5ea8182763a760f533083d6b">   21</a></span>&#160;<span class="comment"></span>      <span class="keyword">public</span> readonly <span class="keywordtype">double</span> <a class="code" href="struct_askowl_1_1_geodetic_1_1_coordinates.html#a8d11c14e5ea8182763a760f533083d6b">Longitude</a>;</div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="comment">      /// &lt;a href=&quot;http://bit.ly/2Oq9qpQ&quot;&gt;Whether we will be working in radians or degrees&lt;/a&gt;</span></div><div class="line"><a name="l00024"></a><span class="lineno"><a class="line" href="struct_askowl_1_1_geodetic_1_1_coordinates.html#a73e2183e8c7f80334a20274bd1d71484">   24</a></span>&#160;<span class="comment"></span>      <span class="keyword">public</span> readonly <span class="keywordtype">bool</span> <a class="code" href="struct_askowl_1_1_geodetic_1_1_coordinates.html#a73e2183e8c7f80334a20274bd1d71484">Radians</a>;</div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="comment">      /// &lt;a href=&quot;http://bit.ly/2Oq9qpQ&quot;&gt;Create a coordinates data structure.&lt;/a&gt;</span></div><div class="line"><a name="l00027"></a><span class="lineno"><a class="line" href="struct_askowl_1_1_geodetic_1_1_coordinates.html#a92edf7fe725edc4ba8ed54e51bf2f0c6">   27</a></span>&#160;<span class="comment"></span>      <span class="keyword">public</span> <a class="code" href="struct_askowl_1_1_geodetic_1_1_coordinates.html#a92edf7fe725edc4ba8ed54e51bf2f0c6">Coordinates</a>(<span class="keywordtype">double</span> latitude, <span class="keywordtype">double</span> longitude, <span class="keywordtype">bool</span> radians = <span class="keyword">false</span>) {</div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;        <a class="code" href="struct_askowl_1_1_geodetic_1_1_coordinates.html#a4a9e4c5478c3bff635f81690ae4d75e8">Latitude</a>  = latitude;</div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;        <a class="code" href="struct_askowl_1_1_geodetic_1_1_coordinates.html#a8d11c14e5ea8182763a760f533083d6b">Longitude</a> = longitude;</div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;        <a class="code" href="struct_askowl_1_1_geodetic_1_1_coordinates.html#a73e2183e8c7f80334a20274bd1d71484">Radians</a>   = radians;</div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;      }</div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="comment">      /// &lt;a href=&quot;http://bit.ly/2Oq9qpQ&quot;&gt;Convert to radians if needed&lt;/a&gt;</span></div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="comment"></span>      <span class="keyword">public</span> <a class="code" href="struct_askowl_1_1_geodetic_1_1_coordinates.html">Coordinates</a> <a class="code" href="struct_askowl_1_1_geodetic_1_1_coordinates.html#a025ea66cb6202bb9fed65084367e40cc">ToRadians</a>() =&gt;</div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;        <a class="code" href="struct_askowl_1_1_geodetic_1_1_coordinates.html#a73e2183e8c7f80334a20274bd1d71484">Radians</a> ? this : Coords(<a class="code" href="class_askowl_1_1_trig.html">Trig</a>.<a class="code" href="class_askowl_1_1_trig.html#a54b27fbc52bd83fb264e83dd5ffd9073">ToRadians</a>(<a class="code" href="struct_askowl_1_1_geodetic_1_1_coordinates.html#a4a9e4c5478c3bff635f81690ae4d75e8">Latitude</a>), <a class="code" href="class_askowl_1_1_trig.html">Trig</a>.<a class="code" href="class_askowl_1_1_trig.html#a54b27fbc52bd83fb264e83dd5ffd9073">ToRadians</a>(<a class="code" href="struct_askowl_1_1_geodetic_1_1_coordinates.html#a8d11c14e5ea8182763a760f533083d6b">Longitude</a>), <span class="keyword">true</span>);</div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="comment">      /// &lt;a href=&quot;http://bit.ly/2Oq9qpQ&quot;&gt;Convert to degrees if needed.&lt;/a&gt;</span></div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="comment"></span>      <span class="keyword">public</span> <a class="code" href="struct_askowl_1_1_geodetic_1_1_coordinates.html">Coordinates</a> <a class="code" href="struct_askowl_1_1_geodetic_1_1_coordinates.html#a4f29f153aeb602a85076f7b136851dd0">ToDegrees</a>() =&gt;</div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;        <a class="code" href="struct_askowl_1_1_geodetic_1_1_coordinates.html#a73e2183e8c7f80334a20274bd1d71484">Radians</a> ? Coords(<a class="code" href="class_askowl_1_1_trig.html">Trig</a>.<a class="code" href="class_askowl_1_1_trig.html#a18e88121c5470f304d44410f0f274e45">ToDegrees</a>(<a class="code" href="struct_askowl_1_1_geodetic_1_1_coordinates.html#a4a9e4c5478c3bff635f81690ae4d75e8">Latitude</a>), <a class="code" href="class_askowl_1_1_trig.html">Trig</a>.<a class="code" href="class_askowl_1_1_trig.html#a18e88121c5470f304d44410f0f274e45">ToDegrees</a>(<a class="code" href="struct_askowl_1_1_geodetic_1_1_coordinates.html#a8d11c14e5ea8182763a760f533083d6b">Longitude</a>), <span class="keyword">true</span>) : <span class="keyword">this</span>;</div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="comment">      /// &lt;a href=&quot;http://bit.ly/2Oq9qpQ&quot;&gt;Coordinates Data Structure&lt;/a&gt;</span></div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="comment"></span>      <span class="keyword">public</span> <span class="keyword">override</span> <span class="keywordtype">string</span> <a class="code" href="struct_askowl_1_1_geodetic_1_1_coordinates.html#a3d6854b0073d63961e1118ce8b8a28a5">ToString</a>() =&gt; $<span class="stringliteral">&quot;({Latitude:n5}, {Longitude:n5})&quot;</span>;</div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="comment">      /// &lt;a href=&quot;http://bit.ly/2NZT6Nd&quot;&gt;Account for inexact equality&lt;/a&gt;</span></div><div class="line"><a name="l00045"></a><span class="lineno"><a class="line" href="struct_askowl_1_1_geodetic_1_1_coordinates.html#ac4d2ab01ec08301501a66cb5140332be">   45</a></span>&#160;<span class="comment"></span>      <span class="keyword">public</span> <span class="keywordtype">bool</span> <a class="code" href="struct_askowl_1_1_geodetic_1_1_coordinates.html#ac4d2ab01ec08301501a66cb5140332be">Equals</a>(<a class="code" href="struct_askowl_1_1_geodetic_1_1_coordinates.html">Coordinates</a> other) {</div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;        var my = <a class="code" href="struct_askowl_1_1_geodetic_1_1_coordinates.html#a025ea66cb6202bb9fed65084367e40cc">ToRadians</a>();</div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;        other = other.<a class="code" href="struct_askowl_1_1_geodetic_1_1_coordinates.html#a025ea66cb6202bb9fed65084367e40cc">ToRadians</a>();</div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;</div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;        <span class="keywordflow">return</span> Compare.AlmostEqual(my.Latitude,  other.<a class="code" href="struct_askowl_1_1_geodetic_1_1_coordinates.html#a4a9e4c5478c3bff635f81690ae4d75e8">Latitude</a>,  0.001) &amp;&amp;</div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;               Compare.AlmostEqual(my.Longitude, other.<a class="code" href="struct_askowl_1_1_geodetic_1_1_coordinates.html#a8d11c14e5ea8182763a760f533083d6b">Longitude</a>, 0.001);</div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;      }</div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;<span class="comment">      /// &lt;a href=&quot;http://bit.ly/2NZT6Nd&quot;&gt;&lt;/a&gt;</span></div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;<span class="comment"></span>      <span class="keyword">public</span> <span class="keyword">override</span> <span class="keywordtype">bool</span> <a class="code" href="struct_askowl_1_1_geodetic_1_1_coordinates.html#ac4d2ab01ec08301501a66cb5140332be">Equals</a>(<span class="keywordtype">object</span> obj) =&gt; base.Equals(obj);</div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;<span class="comment">      /// &lt;a href=&quot;http://bit.ly/2NZT6Nd&quot;&gt;&lt;/a&gt;</span></div><div class="line"><a name="l00057"></a><span class="lineno"><a class="line" href="struct_askowl_1_1_geodetic_1_1_coordinates.html#a078d4a427f65609ff28ef05c757f0b03">   57</a></span>&#160;<span class="comment"></span>      <span class="keyword">public</span> <span class="keyword">override</span> <span class="keywordtype">int</span> <a class="code" href="struct_askowl_1_1_geodetic_1_1_coordinates.html#a078d4a427f65609ff28ef05c757f0b03">GetHashCode</a>() {</div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;        unchecked { <span class="keywordflow">return</span> (<a class="code" href="struct_askowl_1_1_geodetic_1_1_coordinates.html#a4a9e4c5478c3bff635f81690ae4d75e8">Latitude</a>.GetHashCode() * 397) ^ <a class="code" href="struct_askowl_1_1_geodetic_1_1_coordinates.html#a8d11c14e5ea8182763a760f533083d6b">Longitude</a>.GetHashCode(); }</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;      }</div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;    }</div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;<span class="comment">    /// &lt;a href=&quot;&quot;&gt;Create a coordinates data structure.&lt;/a&gt;</span></div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;<span class="comment"></span>    <span class="keyword">public</span> <span class="keyword">static</span> Coordinates Coords(<span class="keywordtype">double</span> latitude, <span class="keywordtype">double</span> longitude, <span class="keywordtype">bool</span> radians = <span class="keyword">false</span>) =&gt;</div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;      <span class="keyword">new</span> Coordinates(latitude, longitude, radians);</div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;<span class="comment">    /// &lt;a href=&quot;http://bit.ly/2NTfGXA&quot;&gt;Calculate the distance between two points accounting for the curvature of the earth.&lt;/a&gt;</span></div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;<span class="comment"></span>    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keywordtype">double</span> Kilometres(Coordinates from, Coordinates to) =&gt; Haversine(from, to);</div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;<span class="comment">    /// &lt;a href=&quot;http://bit.ly/2NTfGXA&quot;&gt;Return a string representation of the distance that is realistic based in the distance. If it is less than one kilometer, return as metres without any decimal place. Otherwise for less than ten kilometres use one decimal, otherwise none.&lt;/a&gt;</span></div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;<span class="comment"></span>    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keywordtype">string</span> DistanceBetween(Coordinates from, Coordinates to) {</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;      <span class="keywordtype">double</span> km = Kilometres(from, to);</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;      <span class="keywordflow">if</span> (km &lt; 1) <span class="keywordflow">return</span> $<span class="stringliteral">&quot;{(int) (km * 1000)} m&quot;</span>;</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;      <span class="keywordflow">return</span> (km &gt; 10) ? $<span class="stringliteral">&quot;{km:n0} km&quot;</span> : $<span class="stringliteral">&quot;{km:n1} km&quot;</span>;</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;    }</div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;<span class="comment">    /// &lt;a href=&quot;http://bit.ly/2NTfGXA&quot;&gt;Haversine approximation of the distance between two coordinates&lt;/a&gt;</span></div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;<span class="comment"></span>    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keywordtype">double</span> Haversine(Coordinates first, Coordinates second) {</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;      first  = first.ToRadians();</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;      second = second.ToRadians();</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;      var sinDeltaLatitude  = Math.Sin((second.Latitude  - first.Latitude)  / 2);</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;      var sinDeltaLongitude = Math.Sin((second.Longitude - first.Longitude) / 2);</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;      var a = (sinDeltaLatitude * sinDeltaLatitude) +</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;              Math.Cos(first.Latitude) * Math.Cos(second.Latitude) *</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;              (sinDeltaLongitude * sinDeltaLongitude);</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;</div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;      <span class="comment">// return EarthMeanRadiusKm * 2 * Math.Atan2(Math.Sqrt(a), Math.Sqrt(1 - a));</span></div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;      <span class="keywordflow">return</span> EarthMeanRadiusKm * 2 * Math.Asin(Math.Sqrt(a));</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;    }</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;<span class="comment">    /// &lt;a href=&quot;http://bit.ly/2Oq9oOK&quot;&gt;Return the bearing in radians to get from one point to another.&lt;/a&gt;</span></div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;<span class="comment"></span>    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keywordtype">double</span> BearingRadians(Coordinates from, Coordinates to) { <span class="comment">// forward azimuth</span></div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;      from = from.ToRadians();</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;      to   = to.ToRadians();</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;      var y = Math.Sin(to.Longitude - from.Longitude) * Math.Cos(to.Latitude);</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;      var x = Math.Cos(from.Latitude) * Math.Sin(to.Latitude) -</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;              Math.Sin(from.Latitude) * Math.Cos(to.Latitude) *</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;              Math.Cos(to.Longitude - from.Longitude);</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;      <span class="keywordflow">return</span> Math.Atan2(y, x);</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;    }</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;<span class="comment">    /// &lt;a href=&quot;http://bit.ly/2Oq9oOK&quot;&gt;Return the bearing in degrees to get from one point to another.&lt;/a&gt;</span></div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;<span class="comment"></span>    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keywordtype">double</span> BearingDegrees(Coordinates from, Coordinates to) =&gt; Trig.ToDegrees(BearingRadians(from, to));</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;<span class="comment">    /// &lt;a href=&quot;http://bit.ly/2Oq9xlg&quot;&gt;Give a starting coordinate, a distance and a direction, calculate and return a destination coordinate.&lt;/a&gt;</span></div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;<span class="comment"></span>    <span class="keyword">public</span> <span class="keyword">static</span> Coordinates Destination(Coordinates start, <span class="keywordtype">double</span> distanceKm, <span class="keywordtype">double</span> bearingDegrees) {</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;      start = start.ToRadians();</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;      var bearingRadians   = Trig.ToRadians(bearingDegrees);</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;      var deltaDistance    = distanceKm / EarthMeanRadiusKm;</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;      var sinDeltaDistance = Math.Sin(deltaDistance);</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;      var cosDeltaDistance = Math.Cos(deltaDistance);</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;      var sinStartLatitude = Math.Sin(start.Latitude);</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;      var cosStartLatitude = Math.Cos(start.Latitude);</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;      var latitude = Math.Asin(</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;        (sinStartLatitude * cosDeltaDistance) +</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;        cosStartLatitude * sinDeltaDistance * Math.Cos(bearingRadians));</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;      var longitude = start.Longitude + Math.Atan2(</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;                        Math.Sin(bearingRadians) * sinDeltaDistance * cosStartLatitude,</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;                        cosDeltaDistance - sinStartLatitude * Math.Sin(latitude));</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;      <span class="keywordflow">return</span> Coords(latitude, longitude, radians: <span class="keyword">true</span>);</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;    }</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;  }</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;}</div><div class="ttc" id="namespace_askowl_html"><div class="ttname"><a href="namespace_askowl.html">Askowl</a></div><div class="ttdef"><b>Definition:</b> <a href="_clock_8cs_source.html#l00003">Clock.cs:3</a></div></div>
<div class="ttc" id="struct_askowl_1_1_geodetic_1_1_coordinates_html_a8d11c14e5ea8182763a760f533083d6b"><div class="ttname"><a href="struct_askowl_1_1_geodetic_1_1_coordinates.html#a8d11c14e5ea8182763a760f533083d6b">Askowl.Geodetic.Coordinates.Longitude</a></div><div class="ttdeci">readonly double Longitude</div><div class="ttdoc">Decimal latitude and longitude held in a 64 bit floating point number/ </div><div class="ttdef"><b>Definition:</b> <a href="_geodetic_8cs_source.html#l00021">Geodetic.cs:21</a></div></div>
<div class="ttc" id="namespace_system_html"><div class="ttname"><a href="namespace_system.html">System</a></div></div>
<div class="ttc" id="class_askowl_1_1_trig_html_a18e88121c5470f304d44410f0f274e45"><div class="ttname"><a href="class_askowl_1_1_trig.html#a18e88121c5470f304d44410f0f274e45">Askowl.Trig.ToDegrees</a></div><div class="ttdeci">static double ToDegrees(double radians)</div><div class="ttdoc">Convert radians to degrees </div></div>
<div class="ttc" id="struct_askowl_1_1_geodetic_1_1_coordinates_html_a92edf7fe725edc4ba8ed54e51bf2f0c6"><div class="ttname"><a href="struct_askowl_1_1_geodetic_1_1_coordinates.html#a92edf7fe725edc4ba8ed54e51bf2f0c6">Askowl.Geodetic.Coordinates.Coordinates</a></div><div class="ttdeci">Coordinates(double latitude, double longitude, bool radians=false)</div><div class="ttdoc">Create a coordinates data structure. </div><div class="ttdef"><b>Definition:</b> <a href="_geodetic_8cs_source.html#l00027">Geodetic.cs:27</a></div></div>
<div class="ttc" id="struct_askowl_1_1_geodetic_1_1_coordinates_html_a3d6854b0073d63961e1118ce8b8a28a5"><div class="ttname"><a href="struct_askowl_1_1_geodetic_1_1_coordinates.html#a3d6854b0073d63961e1118ce8b8a28a5">Askowl.Geodetic.Coordinates.ToString</a></div><div class="ttdeci">override string ToString()</div><div class="ttdoc">Coordinates Data Structure </div></div>
<div class="ttc" id="struct_askowl_1_1_geodetic_1_1_coordinates_html_a078d4a427f65609ff28ef05c757f0b03"><div class="ttname"><a href="struct_askowl_1_1_geodetic_1_1_coordinates.html#a078d4a427f65609ff28ef05c757f0b03">Askowl.Geodetic.Coordinates.GetHashCode</a></div><div class="ttdeci">override int GetHashCode()</div><div class="ttdoc"> </div><div class="ttdef"><b>Definition:</b> <a href="_geodetic_8cs_source.html#l00057">Geodetic.cs:57</a></div></div>
<div class="ttc" id="struct_askowl_1_1_geodetic_1_1_coordinates_html_a025ea66cb6202bb9fed65084367e40cc"><div class="ttname"><a href="struct_askowl_1_1_geodetic_1_1_coordinates.html#a025ea66cb6202bb9fed65084367e40cc">Askowl.Geodetic.Coordinates.ToRadians</a></div><div class="ttdeci">Coordinates ToRadians()</div><div class="ttdoc">Convert to radians if needed </div></div>
<div class="ttc" id="struct_askowl_1_1_geodetic_1_1_coordinates_html_ac4d2ab01ec08301501a66cb5140332be"><div class="ttname"><a href="struct_askowl_1_1_geodetic_1_1_coordinates.html#ac4d2ab01ec08301501a66cb5140332be">Askowl.Geodetic.Coordinates.Equals</a></div><div class="ttdeci">bool Equals(Coordinates other)</div><div class="ttdoc">Account for inexact equality </div><div class="ttdef"><b>Definition:</b> <a href="_geodetic_8cs_source.html#l00045">Geodetic.cs:45</a></div></div>
<div class="ttc" id="class_askowl_1_1_trig_html_a54b27fbc52bd83fb264e83dd5ffd9073"><div class="ttname"><a href="class_askowl_1_1_trig.html#a54b27fbc52bd83fb264e83dd5ffd9073">Askowl.Trig.ToRadians</a></div><div class="ttdeci">static double ToRadians(double degrees)</div><div class="ttdoc">Convert degrees to radians </div></div>
<div class="ttc" id="struct_askowl_1_1_geodetic_1_1_coordinates_html_a4f29f153aeb602a85076f7b136851dd0"><div class="ttname"><a href="struct_askowl_1_1_geodetic_1_1_coordinates.html#a4f29f153aeb602a85076f7b136851dd0">Askowl.Geodetic.Coordinates.ToDegrees</a></div><div class="ttdeci">Coordinates ToDegrees()</div><div class="ttdoc">Convert to degrees if needed. </div></div>
<div class="ttc" id="struct_askowl_1_1_geodetic_1_1_coordinates_html_a4a9e4c5478c3bff635f81690ae4d75e8"><div class="ttname"><a href="struct_askowl_1_1_geodetic_1_1_coordinates.html#a4a9e4c5478c3bff635f81690ae4d75e8">Askowl.Geodetic.Coordinates.Latitude</a></div><div class="ttdeci">readonly double Latitude</div><div class="ttdoc">Decimal latitude and longitude held in a 64 bit floating point number </div><div class="ttdef"><b>Definition:</b> <a href="_geodetic_8cs_source.html#l00018">Geodetic.cs:18</a></div></div>
<div class="ttc" id="class_askowl_1_1_trig_html"><div class="ttname"><a href="class_askowl_1_1_trig.html">Askowl.Trig</a></div><div class="ttdoc">Trigonometry Rocks  </div><div class="ttdef"><b>Definition:</b> <a href="_trig_8cs_source.html#l00008">Trig.cs:8</a></div></div>
<div class="ttc" id="struct_askowl_1_1_geodetic_1_1_coordinates_html"><div class="ttname"><a href="struct_askowl_1_1_geodetic_1_1_coordinates.html">Askowl.Geodetic.Coordinates</a></div><div class="ttdoc">Yet another way to specify coordinates. Consider it as another view on truth. It is a struct...</div><div class="ttdef"><b>Definition:</b> <a href="_geodetic_8cs_source.html#l00016">Geodetic.cs:16</a></div></div>
<div class="ttc" id="struct_askowl_1_1_geodetic_1_1_coordinates_html_a73e2183e8c7f80334a20274bd1d71484"><div class="ttname"><a href="struct_askowl_1_1_geodetic_1_1_coordinates.html#a73e2183e8c7f80334a20274bd1d71484">Askowl.Geodetic.Coordinates.Radians</a></div><div class="ttdeci">readonly bool Radians</div><div class="ttdoc">Whether we will be working in radians or degrees </div><div class="ttdef"><b>Definition:</b> <a href="_geodetic_8cs_source.html#l00024">Geodetic.cs:24</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_48d1e521379ca8046f4287eab60ffd17.html">Askowl</a></li><li class="navelem"><a class="el" href="dir_9f190e40dea38bc06f99133dc08af848.html">Able</a></li><li class="navelem"><a class="el" href="dir_6062dce31c793aaf8a42c7e44d25b496.html">Assets</a></li><li class="navelem"><a class="el" href="dir_d7abb6e435069dd52f7076565dd8f6d2.html">Askowl</a></li><li class="navelem"><a class="el" href="dir_965756a3e5213df52783d29c28f73ea8.html">Able</a></li><li class="navelem"><a class="el" href="dir_1b82fc84bd53f487d55d5135a9484033.html">Scripts</a></li><li class="navelem"><a class="el" href="dir_7ad777803995a1abd3144e59d5200be2.html">Math</a></li><li class="navelem"><b>Geodetic.cs</b></li>
    <li class="footer">Generated on Thu Oct 4 2018 17:07:43 for Able by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.14 </li>
  </ul>
</div>
</body>
</html>
